/* --- Tipografía Global y Fondo --- */
html {
    overflow-y: scroll;
    font-size: 1.1rem; /* Tamaño base aumentado - esto es lo que se escala con accesibilidad */
}

body {
    /* Esta es la fuente de tu dashboard */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background-color: #f4f7fa;
    color: #333;
    margin: 0;
    font-size: 1rem; /* Hereda del html, pero puede ser sobrescrito por JS */
}


input,
button,
select,
textarea,
.btn {
    font-family: inherit !important;
}

/* --- Layout Principal --- */
.app-main {
    flex-grow: 1;
    padding: 2rem;
    width: 100%;
    max-width: 1400px; /* Ancho máximo general */
    margin: 0 auto;
    box-sizing: border-box;
}

/* --- Header Unificado (Estilo Dashboard) --- */
.app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    background-color: #ffffff;
    border-bottom: 3px solid #cc0000; /* Línea roja de Inacap */
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.header-logo {
    display: flex;
    align-items: center;
    gap: 15px;
}
.header-logo img {
    height: 40px;
    display: block;
}
.header-logo span {
    font-size: 1.2rem;
    font-weight: bold;
    color: #555;
}

.header-user {
    display: flex;
    align-items: center;
    gap: 10px; 
    color: #444;
    font-weight: 500;
}

/* Contenedor para los detalles del usuario */
.header-user-details {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
}
.header-user-details .user-role {
    font-weight: 600;
    font-size: 0.9rem; /* Relativo al html - escalará con accesibilidad */
    text-transform: uppercase;
    color: #333;
}
.header-user-details .user-name {
    font-size: 0.85rem; /* Relativo al html - escalará con accesibilidad */
    color: #666;
}

/* Estilos de botones (compartidos) */
.header-config-link,
.header-logout-link {
    text-decoration: none;
    font-weight: 500;
    padding: 8px 12px;
    border-radius: 6px;
    display: flex; 
    align-items: center;
    transition: all 0.2s ease;
    cursor: pointer; /* Para que parezca clickeable */
    border: 1px solid transparent; /* Borde placeholder */
}
.header-config-link i,
.header-logout-link i {
    margin-right: 6px; 
    font-size: 0.9rem;
}
.header-config-link .btn-text,
.header-logout-link .btn-text {
    font-size: 0.9rem; /* Relativo al html - escalará con accesibilidad */
    white-space: nowrap; /* Evita que el texto se parta */
}


/* Botón de Configuración (Gris) */
.header-config-link {
    color: #555; 
    border-color: #ddd; 
    background-color: #f9f9f9; 
}
.header-config-link:hover {
    background-color: #f0f0f0; 
    color: #000; 
    border-color: #ccc;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

/* Botón de Logout (Rojo) */
.header-logout-link {
    color: #cc0000; 
    border-color: #fdecec;
    background-color: #fff;
}
.header-logout-link:hover {
    background-color: #fdecec; 
    color: #a70000; 
    border-color: #f1c9c9;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}


/* Oculta el texto en pantallas pequeñas */
@media (max-width: 768px) {
    .header-logout-link .btn-text,
    .header-config-link .btn-text {
        display: none;
    }
    .header-logout-link i,
    .header-config-link i {
        margin-right: 0;
    }
    .header-logo span {
        display: none; 
    }
}


/* =============================================================
   NUEVOS ESTILOS: MENÚ DESPLEGABLE (DROPDOWN)
================================================================ */

/* Contenedor principal del dropdown */
.header-dropdown {
    position: relative; /* Clave para el menú absoluto */
    display: inline-block;
}

/* El menú que se oculta/muestra */
.dropdown-menu {
    display: none; /* Oculto por defecto */
    position: absolute;
    right: 0;
    top: 100%; /* Justo debajo del botón */
    margin-top: 5px; /* Pequeño espacio */
    min-width: 220px; /* Ancho mínimo */
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border: 1px solid #eee;
    z-index: 1000;
    padding: 5px 0; /* Espacio arriba y abajo */
}

/* NUEVA REGLA (controlada por JS): */
.dropdown-menu.show {
    display: block;
}


/* Items individuales del menú */
.dropdown-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    color: #333;
    text-decoration: none;
    font-size: 0.9rem; /* Relativo al html - escalará con accesibilidad */
    white-space: nowrap;
}
.dropdown-item:hover {
    background-color: #f4f7fa; /* Gris claro al pasar el mouse */
    color: #000;
}
.dropdown-item i {
    margin-right: 12px;
    width: 16px; /* Ancho fijo para alinear íconos */
    text-align: center;
    color: #777;
}

/* Estilo para el item que contiene el toggle */
.dropdown-item.toggle-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.dropdown-item.toggle-item label {
    display: flex;
    align-items: center;
    cursor: pointer;
}
.dropdown-item.toggle-item label i {
    margin-right: 12px;
}

/* Item de accesibilidad con controles inline */
.dropdown-item.accessibility-item {
    cursor: default;
    justify-content: space-between;
}

.accessibility-controls-inline {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-left: auto;
}

.accessibility-btn {
    background-color: #e9ecef;
    border: 1px solid #ced4da;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: #495057;
    font-size: 0.85rem; /* Relativo al html - escalará con accesibilidad */
    padding: 0;
    flex-shrink: 0;
}

.accessibility-btn:hover:not(:disabled) {
    background-color: #dee2e6;
    border-color: #adb5bd;
}

.accessibility-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}


/* =============================================================
   NUEVOS ESTILOS: INTERRUPTOR (TOGGLE SWITCH)
================================================================ */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 40px;  /* Ancho del switch */
    height: 20px; /* Alto del switch */
    cursor: pointer;
}
.toggle-switch input {
    opacity: 0;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    margin: 0;
    cursor: pointer;
    z-index: 2; /* Asegurar que el input esté por encima */
}
.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    border-radius: 20px;
    transition: .4s;
    z-index: 1;
}
.slider:before {
    position: absolute;
    content: "";
    height: 16px; /* Alto del círculo */
    width: 16px;  /* Ancho del círculo */
    left: 2px;
    bottom: 2px;
    background-color: white;
    border-radius: 50%;
    transition: .4s;
}
input:checked + .slider {
    background-color: #cc0000; /* Color rojo INACAP */
}
input:checked + .slider:before {
    transform: translateX(20px); /* Movimiento = Ancho total - Ancho círculo - (Padding*2) */
}


/* =============================================================
   NUEVOS ESTILOS: MODO OSCURO (CON CORRECCIÓN DE ESPECIFICIDAD)
================================================================ */

/* =============================================================
   MODO OSCURO - BASE.CSS (Mejor contraste)
   ============================================================= */

body.dark-mode {
    background-color: #121212; /* Fondo más oscuro para mejor contraste */
    color: #ffffff; /* Texto blanco para mejor legibilidad */
}

/* --- Componentes principales - Mejor contraste --- */
body.dark-mode .app-header,
body.dark-mode .app-footer,
body.dark-mode .panel-section,
body.dark-mode .table-container,
body.dark-mode .kpi-card,
body.dark-mode .support-grid-container,
body.dark-mode .dashboard-nav,
body.dark-mode .modal-content,
body.dark-mode .cal-citas-list,
body.dark-mode .cal-cita-item,
body.dark-mode .login-container,
body.dark-mode .form-container,
body.dark-mode .dropdown-menu {
    background-color: #1e1e1e !important; /* Más oscuro para mejor contraste */
    color: #ffffff !important; /* Texto blanco */
    border-color: #3a3a3a !important; /* Bordes más visibles */
}

/* --- Textos principales - Blanco para mejor contraste --- */
body.dark-mode h1,
body.dark-mode h2,
body.dark-mode h3,
body.dark-mode h4,
body.dark-mode .kpi-value,
body.dark-mode .support-title,
body.dark-mode .custom-table td,
body.dark-mode .header-user-details .user-role,
body.dark-mode .dropdown-item,
body.dark-mode .form-group label,
body.dark-mode .table-header h2,
body.dark-mode .custom-table th {
    color: #ffffff !important; /* Texto blanco para mejor legibilidad */
}

/* --- Textos secundarios - Gris claro para legibilidad --- */
body.dark-mode p,
body.dark-mode span,
body.dark-mode .kpi-label,
body.dark-mode .support-total,
body.dark-mode .header-user-details .user-name,
body.dark-mode .cal-cita-asunto,
body.dark-mode .form-group small {
    color: #d0d0d0 !important; /* Gris más claro para mejor legibilidad */
}

body.dark-mode .app-footer p {
    color: #b0b0b0 !important;
}

body.dark-mode .border-bottom {
    border-color: #3a3a3a !important; /* Bordes más visibles */
}

/* --- Botones y Links - Mejor contraste --- */
body.dark-mode .header-config-link,
body.dark-mode .header-config-link:hover {
    background-color: #2a2a2a !important;
    border-color: #4a4a4a !important;
    color: #ffffff !important;
}

body.dark-mode .header-logout-link {
    background-color: #1e1e1e !important;
    border-color: #4a4a4a !important;
    color: #ffffff !important;
}

body.dark-mode .nav-item:hover,
body.dark-mode .dropdown-item:hover {
    background-color: #2a2a2a !important;
    color: #ffffff !important;
}

body.dark-mode .accessibility-btn {
    background-color: #2a2a2a !important;
    border-color: #4a4a4a !important;
    color: #ffffff !important;
}

body.dark-mode .accessibility-btn:hover:not(:disabled) {
    background-color: #3a3a3a !important;
    border-color: #5a5a5a !important;
}

body.dark-mode .btn-volver {
    background-color: #2a2a2a !important;
    color: #ffffff !important;
    border-color: #4a4a4a !important;
}

body.dark-mode .btn-volver:hover {
    background-color: #3a3a3a !important;
}

/* --- Formularios - Mejor contraste --- */
body.dark-mode .form-group input,
body.dark-mode .form-group select,
body.dark-mode .form-group textarea,
body.dark-mode .search-bar input,
body.dark-mode .entries-selector select,
body.dark-mode .input-readonly {
    background-color: #2a2a2a !important; /* Fondo más claro para inputs */
    color: #ffffff !important; /* Texto blanco */
    border-color: #4a4a4a !important; /* Bordes más visibles */
}

body.dark-mode .drop-zone {
    background-color: #1a1a1a !important;
    border-color: #3a3a3a !important;
}

/* --- Calendario - Mejor contraste --- */
body.dark-mode .cal-day:not(.other-month):hover {
    background-color: #2a2a2a !important;
}

body.dark-mode .cal-day.day-today {
    background-color: #007bff !important;
    border-color: #007bff !important;
    color: #ffffff !important;
}


/* =============================================================
   NUEVOS ESTILOS: MODO ACCESIBILIDAD
================================================================ */

/* Aumenta el tamaño de fuente base */
body.accessibility-mode {
    font-size: 110%; /* O 1.1em. Aumenta todo */
}

/* Asegura que los botones e inputs hereden el tamaño */
body.accessibility-mode .btn,
body.accessibility-mode button,
body.accessibility-mode input,
body.accessibility-mode select,
body.accessibility-mode textarea,
body.accessibility-mode .dropdown-item {
    font-size: 1em; /* Hereda el tamaño base aumentado */
}

/* Aumenta el contraste de los enlaces y botones en foco/hover */
body.accessibility-mode a:hover,
body.accessibility-mode button:hover,
body.accessibility-mode input:focus,
body.accessibility-mode select:focus,
body.accessibility-mode textarea:focus,
body.accessibility-mode .dropdown-item:hover,
body.accessibility-mode .nav-item:hover,
body.accessibility-mode .header-config-link:focus-within, /* Para el dropdown */
body.accessibility-mode .header-logout-link:focus,
body.accessibility-mode .btn-accion:focus {
    outline: 3px solid #007bff; /* Borde azul de alto contraste */
    box-shadow: 0 0 0 2px #ffffff; /* Borde interior blanco */
}


/* --- Reglas antiguas (sin cambios) --- */
.header-user-info { 
    text-align: right;
}
.header-user-info .user-role {
    font-weight: bold;
    text-transform: uppercase;
}
.header-user-info .user-name {
    font-size: 0.9rem;
    color: #666;
}

.header-actions a {
    color: #cc0000;
    font-size: 1.5rem;
    text-decoration: none;
    margin-left: 10px;
}
.header-actions a:hover {
    color: #333;
}

/* --- Footer Unificado --- */
.app-footer {
    text-align: center;
    padding: 1.5rem;
    background-color: #ffffff;
    border-top: 1px solid #dee2e6;
    font-size: 0.9rem;
    color: #6c757d;
    margin-top: auto;
}